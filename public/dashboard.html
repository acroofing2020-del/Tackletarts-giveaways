<!doctype html>
<html>
<head><meta charset="utf-8"><title>My Dashboard</title></head>
<body>
  <h2>My Tickets & Wins</h2>
  <div>Credit: £<span id="credit">0.00</span></div>
  <table border="1" cellpadding="6" cellspacing="0">
    <thead><tr><th>Competition</th><th>Ticket #</th><th>Instant Win</th><th>When</th></tr></thead>
    <tbody id="rows"></tbody>
  </table>
<script>
async function load(){
  const r = await fetch('/api/my-tickets');
  if(!r.ok){ alert('Please login'); location.href='/login.html'; return; }
  const data = await r.json();
  document.getElementById('credit').textContent = (data.credit_cents/100).toFixed(2);
  const tb = document.getElementById('rows');
  tb.innerHTML = '';
  data.tickets.forEach(t=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${t.title}</td><td>${t.ticket_number}</td><td>${t.is_instant_win? '✅':'—'}</td><td>${t.created_at}</td>`;
    tb.appendChild(tr);
  });
}
load();
</script>
</body>
</html>
